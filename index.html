<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Netflix Clone</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Netflix Sans', Arial, sans-serif;
    }
    
    body {
      background: #141414;
      color: white;
    }
    
    .navbar {
      padding: 20px 40px;
      background: linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0) 100%);
      position: fixed;
      width: 100%;
      z-index: 999;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    .logo {
      color: #E50914;
      font-size: 2rem;
      font-weight: bold;
    }
    
    .search-box {
      flex: 0 1 300px;
      position: relative;
    }
    
    .search-input {
      width: 100%;
      padding: 8px 16px;
      border-radius: 4px;
      border: none;
      background: rgba(255,255,255,0.2);
      color: white;
      font-size: 1rem;
    }
    
    .search-input::placeholder {
      color: rgba(255,255,255,0.5);
    }
    
    .filters {
      display: flex;
      gap: 15px;
    }
    
    .filter-btn {
      background: rgba(255,255,255,0.1);
      border: none;
      color: white;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.3s;
    }
    
    .filter-btn.active {
      background: #E50914;
    }
    
    .filter-btn:hover {
      background: rgba(255,255,255,0.2);
    }
    
    .content {
      padding: 80px 40px 20px;
    }
    
    .movies-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
      padding: 20px 0;
    }
    
    .movie-card {
      position: relative;
      border-radius: 4px;
      overflow: hidden;
      transition: transform 0.3s;
      cursor: pointer;
    }
    
    .movie-card:hover {
      transform: scale(1.05);
    }
    
    .movie-poster {
      width: 100%;
      height: 300px;
      object-fit: cover;
      background: #2f2f2f;
    }
    
    .movie-info {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 10px;
      background: rgba(0,0,0,0.8);
    }
    
    .movie-title {
      font-size: 0.9rem;
      margin-bottom: 5px;
    }
    
    .movie-category {
      font-size: 0.8rem;
      color: #999;
    }
    
    .loading {
      text-align: center;
      padding: 20px;
      font-size: 1.2rem;
    }
  </style>
</head>
<body>

<div class="navbar">
  <div class="logo">NETFLIX</div>
  <div class="search-box">
    <input type="text" class="search-input" placeholder="Buscar títulos..." id="searchInput">
  </div>
  <div class="filters">
    <button class="filter-btn active" data-filter="all">Todos</button>
    <button class="filter-btn" data-filter="Filmes">Filmes</button>
    <button class="filter-btn" data-filter="Series">Séries</button>
    <button class="filter-btn" data-filter="Lancamentos">Lançamentos</button>
  </div>
</div>

<div class="content">
  <input type="file" id="fileInput" accept=".txt" style="margin-bottom: 20px;">
  <div class="movies-grid" id="moviesGrid">
    <div class="loading">Carregando...</div>
  </div>
</div>

<script>
document.getElementById('fileInput').addEventListener('change', async (event) => {
  const file = event.target.files[0];
  
  if (file) {
    const text = await readFile(file);
    const movies = parseMovies(text);
    renderMovies(movies);
  }
});

function readFile(file) {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = () => resolve(reader.result);
    reader.onerror = reject;
    reader.readAsText(file);
  });
}

function parseMovies(text) {
  const lines = text.split('\n');
  const movies = [];
  
  for (let i = 0; i < lines.length; i++) {
    if (lines[i].startsWith('#EXTINF')) {
      const movieInfo = lines[i];
      const movieUrl = lines[i + 1];
      
      const titleMatch = movieInfo.match(/tvg-name="([^"]+)"/);
      const logoMatch = movieInfo.match(/tvg-logo="([^"]+)"/);
      const categoryMatch = movieInfo.match(/group-title="([^"]+)"/);
      
      if (titleMatch && logoMatch && categoryMatch) {
        movies.push({
          title: titleMatch[1],
          logo: logoMatch[1],
          url: movieUrl.trim(),
          category: categoryMatch[1]
        });
      }
    }
  }
  
  return movies;
}

function renderMovies(movies, filter = 'all', searchTerm = '') {
  const grid = document.getElementById('moviesGrid');
  grid.innerHTML = '';
  
  let filteredMovies = filter === 'all' 
    ? movies 
    : movies.filter(movie => movie.category.includes(filter));
    
  if (searchTerm) {
    const searchLower = searchTerm.toLowerCase();
    filteredMovies = filteredMovies.filter(movie => 
      movie.title.toLowerCase().includes(searchLower)
    );
  }
  
  if (filteredMovies.length === 0) {
    grid.innerHTML = '<div class="loading">Nenhum título encontrado</div>';
    return;
  }
  
  filteredMovies.forEach(movie => {
    const card = document.createElement('div');
    card.className = 'movie-card';
    
    card.innerHTML = `
      <img class="movie-poster" src="${movie.logo}" onerror="this.src='https://via.placeholder.com/200x300/2f2f2f/ffffff?text=No+Image'" alt="${movie.title}">
      <div class="movie-info">
        <div class="movie-title">${movie.title}</div>
        <div class="movie-category">${movie.category}</div>
      </div>
    `;
    
    card.addEventListener('click', () => {
      const iframeContainer = document.createElement('div');
      iframeContainer.style.position = 'fixed';
      iframeContainer.style.top = '0';
      iframeContainer.style.left = '0';
      iframeContainer.style.width = '100%';
      iframeContainer.style.height = '100%';
      iframeContainer.style.backgroundColor = 'rgba(0, 0, 0, 0.9)';
      iframeContainer.style.zIndex = '1000';
      iframeContainer.style.display = 'flex';
      iframeContainer.style.alignItems = 'center';
      iframeContainer.style.justifyContent = 'center';
      
      const iframe = document.createElement('iframe');
      iframe.src = movie.url;
      iframe.style.width = '80%';
      iframe.style.height = '80%';
      iframe.style.border = 'none';
      
      const closeButton = document.createElement('button');
      closeButton.innerText = 'Fechar';
      closeButton.style.position = 'absolute';
      closeButton.style.top = '20px';
      closeButton.style.right = '20px';
      closeButton.style.padding = '10px 20px';
      closeButton.style.backgroundColor = '#E50914';
      closeButton.style.color = '#fff';
      closeButton.style.border = 'none';
      closeButton.style.cursor = 'pointer';
      closeButton.style.zIndex = '1001';
      
      closeButton.addEventListener('click', () => {
        document.body.removeChild(iframeContainer);
      });

      iframeContainer.appendChild(iframe);
      iframeContainer.appendChild(closeButton);
      document.body.appendChild(iframeContainer);
    });

    grid.appendChild(card);
  });
}
</script>

</body>
</html>
